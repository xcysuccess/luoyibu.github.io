
<!DOCTYPE html>
<html lang="zh-CN">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="luoyibu&#39; blog">
    <title>关于Core Animation动画（上） - luoyibu&#39; blog</title>
    <meta name="author" content="luoyibu">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="&amp;lt;!-- toc --&amp;gt;
UIView与CALayer对于UIView和CALayer，大家应该都很熟悉。通常我们了解到UIView是通过视图树的结构来组织起来的，实际上，UIView管理并维护了另一个图层树(即CALayer树)，真正的在屏幕上显示与动画的实际上是CALayer对象。
如果说CALayer是View的内部实现细节，那么为什么苹果要再封装一层UIView呢，UIView与CALay">
<meta property="og:type" content="blog">
<meta property="og:title" content="关于Core Animation动画（上）">
<meta property="og:url" content="http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/index.html">
<meta property="og:site_name" content="luoyibu' blog">
<meta property="og:description" content="&amp;lt;!-- toc --&amp;gt;
UIView与CALayer对于UIView和CALayer，大家应该都很熟悉。通常我们了解到UIView是通过视图树的结构来组织起来的，实际上，UIView管理并维护了另一个图层树(即CALayer树)，真正的在屏幕上显示与动画的实际上是CALayer对象。
如果说CALayer是View的内部实现细节，那么为什么苹果要再封装一层UIView呢，UIView与CALay">
<meta property="og:updated_time" content="2015-12-12T08:49:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于Core Animation动画（上）">
<meta name="twitter:description" content="&amp;lt;!-- toc --&amp;gt;
UIView与CALayer对于UIView和CALayer，大家应该都很熟悉。通常我们了解到UIView是通过视图树的结构来组织起来的，实际上，UIView管理并维护了另一个图层树(即CALayer树)，真正的在屏幕上显示与动画的实际上是CALayer对象。
如果说CALayer是View的内部实现细节，那么为什么苹果要再封装一层UIView呢，UIView与CALay">
<meta name="twitter:creator" content="@luoyibu">
    
    
    
        <meta property="og:image" content="/assets/images/author.png"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-56202884-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">luoyibu&#39; blog</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/#search">
        
        
            <img class="header-picture" src="/assets/images/author.png"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/author.png"/>
            </a>
            <span class="sidebar-profile-name">luoyibu</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首页</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分类</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">标签</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">归档</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/luoyibu/" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:luoyibu@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">邮箱</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            关于Core Animation动画（上）
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Sun Nov 01 2015 15:54:54 GMT+0800">
	
		    11月 01, 2015
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/iOS/">iOS</a>


    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#UIView_u4E0ECALayer"><span class="toc-text">UIView与CALayer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u9690_u5F0F_u52A8_u753B"><span class="toc-text">隐式动画</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#u4E8B_u52A1"><span class="toc-text">事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#modelLayer_u4E0EpresentationLayer"><span class="toc-text">modelLayer与presentationLayer</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u603B_u7ED3_u4E00_u4E0B"><span class="toc-text">总结一下</span></a></li></ol>
<h2 id="UIView_u4E0ECALayer"><a href="#UIView_u4E0ECALayer" class="headerlink" title="UIView与CALayer"></a>UIView与CALayer</h2><p>对于<code>UIView</code>和<code>CALayer</code>，大家应该都很熟悉。通常我们了解到UIView是通过视图树的结构来组织起来的，实际上，UIView管理并维护了另一个图层树(即CALayer树)，真正的在屏幕上显示与动画的实际上是CALayer对象。</p>
<p><strong>如果说CALayer是View的内部实现细节，那么为什么苹果要再封装一层UIView呢，UIView与CALayer的区别又是什么呢？</strong>  </p>
<a id="more"></a>
<p>UIView与CALayer最大的区别就是UIView可以处理用户的交互（如点击事件），而CALayer是不清楚具体的响应者链的，其不能够响应事件。</p>
<p>将响应事件抽象到UIView中的原因，是为了与Mac OS公用一套底层代码(即layer层)。在Mac OS中有一个NSView的类，会用来处理一些与iOS不同的用户事件(比如键盘鼠标)。</p>
<p><strong>对于大部分的简单场景，UIView都可以满足我们的要求。那么研究CALayer有什么用呢？</strong>  </p>
<p>前面我们了解CALayer是无法像UIView那样处理触摸事件的，UIView也有一些没有暴露出来的CALayer的功能：</p>
<ul>
<li>阴影，圆角，边框</li>
<li>3D变换（UIView只有2D变换）</li>
<li>透明遮罩</li>
<li>非矩形范围</li>
<li>非线性动画</li>
<li>其他很多功能，</li>
</ul>
<p><strong>实际上，每个UIView都有一个CALayer实例的图层属性，我们可以通过view.layer来获取。</strong></p>
<p>CALayer有很多特殊的子类，可以实现很多不同的效果，大概可以看看CALayer具体有哪些子类。我们既可以改变UIView的CALayer类别，也可以为其添加不同的CALayer实例。这里暂时不讲太多，本章主要还是以动画为主。</p>
<h2 id="u9690_u5F0F_u52A8_u753B"><a href="#u9690_u5F0F_u52A8_u753B" class="headerlink" title="隐式动画"></a>隐式动画</h2><p>了解CALayer与UIView，我们可以来看看隐式动画，了解什么情况下，系统会自动产生动画。什么情况下，需要我们自己添加动画。</p>
<p>隐式动画实际上是由事物来产生的，我们先看看事物的概念：</p>
<h3 id="u4E8B_u52A1"><a href="#u4E8B_u52A1" class="headerlink" title="事务"></a>事务</h3><p>事务实际上是<code>Core Animation</code>用来包含一系列属性动画集合的机制，任何对CALayer的属性改变都不会立刻发生变化，而是在事务提交后，用一个动画过度到新值。  </p>
<p>Core Animation在每个run loop周期中自动开始一次新的事务，任何在一次run loop循环中<strong>属性</strong>的改变都会集中起来，然后做一次0.25秒的动画。  </p>
<p>比如说，我们添加一个新的layer到视图上，改变其backGroundColor，会发现颜色不是瞬间就改变的，而是经过了0.25s（动画的默认时长）的时间渐变过来。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CALayer的隐式动画</span></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建一个红色的layer</span></span><br><span class="line">    _layer = [<span class="built_in">CALayer</span> layer];</span><br><span class="line">    _layer<span class="variable">.frame</span> = <span class="keyword">self</span><span class="variable">.view</span><span class="variable">.bounds</span>;</span><br><span class="line">    _layer<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> redColor]<span class="variable">.CGColor</span>;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.view</span><span class="variable">.layer</span> addSublayer:_layer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">IBAction</span>)changeColor:(<span class="keyword">id</span>)sender &#123;</span><br><span class="line">    <span class="comment">//修改layer的颜色为黄色   此时，颜色是由红色渐变到黄色的</span></span><br><span class="line">    _layer<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> yellowColor]<span class="variable">.CGColor</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>上面就是隐式动画产生的原因，每个run loop中的会默认开启一个事务来完成CALayer的隐私动画。  需要注意的是，UIView所关联的layer，是禁用了隐式动画的。这个时候我们需要自己来实现动画：</strong></p>
<p>我们可以通过CATransaction的<code>+begin</code>和<code>+commit</code>来入栈或者出栈一个新的事务（也可以使用UIView的一些快捷方法，如<code>+beginAnimations:context:</code>和<code>+animateWithDuration:animations:</code>，他们本质上是一样的），在新建的事务中，我们可以修改一些动画相关的设定，比如说duration动画时间，而这些设定是只对当前事务有效的，不会影响到默认run loop中的事务。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对View做动画，需要包含在事物中</span></span><br><span class="line">[<span class="built_in">CATransaction</span> begin];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.view</span><span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> yellowColor];     <span class="comment">//改变view颜色</span></span><br><span class="line">[<span class="built_in">CATransaction</span> setAnimationDuration:<span class="number">1</span>];             <span class="comment">//修改本次事务的动画时间</span></span><br><span class="line">[<span class="built_in">CATransaction</span> setCompletionBlock:^&#123;	               <span class="comment">//动画结束后回调</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"animation completed"</span>);</span><br><span class="line">&#125;];</span><br><span class="line">[<span class="built_in">CATransaction</span> commit];  <span class="comment">//提交动画</span></span><br></pre></td></tr></table></figure>
<h3 id="modelLayer_u4E0EpresentationLayer"><a href="#modelLayer_u4E0EpresentationLayer" class="headerlink" title="modelLayer与presentationLayer"></a>modelLayer与presentationLayer</h3><p>从上面的部分我们知道了CALayer的属性发生变化，会通过一段动画时间来渐变更新,而我们只是设置了backColor的起始值和结束值(由红色变为黄色)。那么是否有办法获取到动画中间状态的backColor呢？</p>
<p>答案是可以的，我们需要了解2个概念，<code>modelLayer</code>与<code>presentationLayer</code>。  </p>
<p>多数情况下，我们创建的一个CALayer实例，是指的modelLayer（可以称为数据图层）。我们对一个layer对象调用-modelLayer通常会返回-self。当一个layer的属性发生变化时，modelLayer的属性值立刻（动画开始前）就发生了变化，在上面的例子中，modelLayer的值是立刻从红色变为黄色的。</p>
<p>而presentationLayer称为展现图层，它实际上是modelLayer的一份拷贝，表示了任意时刻屏幕显示的layer的真实值。也即动画过程中layer中间态的属性值，可以通过presentationLayer来获取。<br>需要注意的是只有layer在第一次屏幕上显示时，presentationLayer才会被创建，在这之前-presentationLayer返回的是nil。</p>
<h2 id="u603B_u7ED3_u4E00_u4E0B"><a href="#u603B_u7ED3_u4E00_u4E0B" class="headerlink" title="总结一下"></a>总结一下</h2><ol>
<li>我们了解了CAlayer是UIView的底层实现，UIView可以处理一些用户触摸的事件，而CALayer则提供了更丰富的底层功能。</li>
<li>对于CALayer的属性改变，runloop会有一个默认的事物来进行隐式动画，而UIView则禁用掉了隐私动画，我们可以通过提交一个新的事物来对UIView的属性改变赋予一个可以控制的动画效果。</li>
<li>我们了解了modelLayer的属性是在修改后立刻就变为终值的，而presentationLayer则会经历一个渐变的修改过程，这对于一些交互性的动画很有帮助。</li>
</ol>
<p><em>后续可能会讲一些Core Animation其他的东西，比如说显示动画，渲染树之类</em></p>
<p>转载请注明出处，我的博客: <a href="luoyibu.com">luoyibu</a></p>

            
                

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Core-Animation/">Core Animation</a> <a class="tag tag--primary tag--small t-link" href="/tags/iOS/">iOS</a> <a class="tag tag--primary tag--small t-link" href="/tags/动画/">动画</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/05/12/iOS异步图片加载优化与常用开源库分析/" data-tooltip="iOS异步图片加载优化与常用开源库分析">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 luoyibu. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/05/12/iOS异步图片加载优化与常用开源库分析/" data-tooltip="iOS异步图片加载优化与常用开源库分析">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-google-plus"></i><span class="">分享到 Google+</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-facebook-official"></i><span>分享到 Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://luoyibu.com/2015/11/01/关于Core Animation动画（上）/">
                <i class="fa fa-twitter"></i><span>分享到 Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <!-- Define author's picture -->


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/author.png"/>
        
            <h4 id="about-card-name">luoyibu</h4>
        
            <h5 id="about-card-bio"><p>hi！我是罗轩 （@luoyibu），一名来自中国的iOS开发者。对与coding有着十足的兴趣，目前正致力于成长为一名大牛，创作一些有趣的东西。</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>iOS开发者</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                深圳
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'luoyibu';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>


    <script type="text/javascript">
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
            e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','kopTPCUkNkSMiYdysmbw','2.0.0');
    </script>


</html>
